<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>TechU</title>
    <script>
        // post to currentuser database to log the current users score
    window.addEventListener("load", function(){
        function sendData() {
            const sendRequest = new XMLHttpRequest();
            const signupInfo = new URLSearchParams(new FormData(form));
            sendRequest.addEventListener("error", function (event){
                // alert('Log In unsuccessful! Please try again.');
            });
            sendRequest.addEventListener("load", function (event) {
                alert('You are logged in!!!');
            });
            sendRequest.open("PATCH", "http://localhost:5000/app/update/user/logged/1" );
            sendRequest.send( signupInfo );
        }
        const form = document.getElementById("login-form");
        form.addEventListener("submit", function ( event ){
            event.preventDefault();
            sendData();
        });
    });
    </script>
</head>
<body style="background-color: #6CB7E2" >
    <div class="container-sm" style="background-color: #6CB7E2"> <br>
        <ul class="nav justify-content-center" style="color: #f8f9fa;">
          <!-- <a class="navbar-brand" href="#"> <img src="images/techULogo.PNG" alt="logo" style="max-width: 70%; max-height: 70%;"></a> -->
            <li class="nav-item">
              <a class="nav-link" href="index.html" style="color: #f8f9fa;"><b>HOME</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html#tracks_on_home" style="color: #f8f9fa;"><b>TRACKS</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="tutorials.html" style="color: #f8f9fa;"><b>TUTORIALS</b></a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="account.html" style="color: #0d6efd;"><b>SIGN IN</b></a>
            </li>
        </ul><br>
    </div> 

    <div class="container-fluid" style="text-align: center; color: #f8f9fa;">
      <h1> Create your account here! </h1>
    <form id = "createF">
        <div id = "create"></div>
        <div class = "formgroup" id="username-form">
            <label for="email">Email</label>
            <input type="text" id="email"
            name="email" required/>
        </div>

        <div class = "formgroup" id="password-form">
            <label for="pass">Password</label>
            <input type="password" id="pass"
            name="pass" required/>
        </div>

        <div class = "formgroup" id="email-form">
            <label for="pass2">Password (Confirmation)</label>
            <input type="password" id="pass2"
            name="pass2" required/>
        </div>

        <input type="submit" value="Submit"/>
    </form>
    <script>
    window.addEventListener("load", function(){
    function sendData() {
        const sendRequest = new XMLHttpRequest();
        const signupInfo = new FormData(document.forms.createF);
        sendRequest.addEventListener("error", function (event){
            var tag = document.createElement("p"); // <p></p>
            var text = document.createTextNode("Your account is now created!"); 
            var parElement = document.getElementById("createF");
            var textToAdd = document.createTextNode("Your account is now created!");
            parElement.appendChild(tag);
            tag.appendChild(text);
        });
        sendRequest.open("POST", "http://localhost:5000/new/login");
        sendRequest.send( signupInfo );
    }
    const form = document.getElementById("createF");
    form.addEventListener("submit", function ( event ){
        event.preventDefault();
        sendData();
    });
});
    </script>
    </div>

    <br>

    <div class="container-fluid" style="text-align: center; color: #f8f9fa;">
      <h1> Log into your account here! </h1>
    <form id = "login-form">
        <div id = "login"></div>
        <div class = "formgroup" id="username-form">
            <label for="email">Email</label>
            <input type="text" id="email"
            name="email" required/>
        </div>

        <div class = "formgroup" id="password-form">
            <label for="pass">Password</label>
            <input type="password" id="pass"
            name="pass" required/>
        </div>

        <input type="submit" value="Submit"/>
    </form>

    <script>
      // post to currentuser database to log the current users score
  window.addEventListener("load", function(){
      function sendData() {
          const sendRequest = new XMLHttpRequest();
          const signupInfo = new URLSearchParams(new FormData(form));
          
          sendRequest.addEventListener("error", function (event){
            var tag = document.createElement("p"); // <p></p>
            var text = document.createTextNode("Welcome Back!"); 
        
            var parElement = document.getElementById("login-form");
            var textToAdd = document.createTextNode("Welcome Back!");
            parElement.appendChild(tag);
            tag.appendChild(text);
          });
          sendRequest.open("PATCH", "http://localhost:5000/update/email/logged/1" );
          sendRequest.send( signupInfo );
      }
      const form = document.getElementById("login-form");
      form.addEventListener("submit", function ( event ){
          event.preventDefault();
          sendData();
      });
  });
  </script>
    </div>

    <br>

    <!-- <div class="container-fluid" style="text-align: center; color: #f8f9fa;">
      <h4>Mockup for Sign Up (New User):</h4><br>
      <img src="images/sign_in/mockup_login.png" style="width: 900px; border-style: double; border-color: #f8f9fa;"><br>
    </div><br>

    <div class="container-fluid" style="text-align: center; color: #f8f9fa;">
      <h4>Mockup for Log In (Returning User):</h4><br>
      <img src="images/sign_in/mockup_welcome_back.png" style="width: 900px; border-style: double; border-color: #f8f9fa;"><br>
    </div><br>

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> -->
</body>
</html>

